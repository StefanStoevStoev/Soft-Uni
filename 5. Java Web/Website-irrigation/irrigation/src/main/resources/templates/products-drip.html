<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec='http://www.thymeleaf.org/extras/spring-security' xmlns:width="http://www.w3.org/1999/xhtml">

<head>
    <title>Мелиорации</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"></link>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <link rel="stylesheet" th:href="@{/css/styles-drip.css}">
    <link rel="icon" type="image/x-icon" href="/images/fav3.png">
</head>
<body>
<div th:replace="fragments/fragment::navigation"></div>
<div class="container ">
    <ul class="navbar-nav  mt-4 position-relative ps-5 pe-5">

        <div class="bg-light p-2 mt-2 me-0 ms-0 mask-custom-1" style="--bs-bg-opacity: .6">
            <div class="row pt-2 mb-2 ps-2 " th:object="${getDripById1}" style="height: 23vh; overflow: auto">
                <div class="col-auto ">
                    <img src="/images/drips/hose16-10.png" height="140" width="190" class="img-fluid " alt=" ">
                </div>
                <!--                text block-->
                <div class="col" style="width: 350px; height: 150px">
                    <div class="row">
                        <div class="col text-end ps-0 pe-0">
                            <!--                        fs-6 text size-->
                            <p class="fs-6 fw-bold mb-0">Име:</p>
                            <p class="fs-6 mb-0">Код:</p>
                            <p class="fs-6 mb-0">Диаметър:</p>
                            <p class="fs-6 mb-0">Продължителност за използване:</p>
                            <p class="fs-6 mb-0">Разстояние между капкуватели:</p>
                            <p class="fs-6 mb-0">Дебит на капкувател:</p>
                            <p class="fs-6 mb-0">Максимално работно налягане:</p>
                        </div>
                        <div class="col-md-auto ms-2 me-2">
                            <!--                        fs-6 text size-->
                            <p class="fs-6 fw-bold mb-0" th:text="*{getName()}">Име</p>
                            <p class="fs-6 mb-0" th:text="*{getCode()}">Код</p>
                            <p class="fs-6 mb-0" th:text="|*{getDiameter()}mm|">Диаметър</p>
                            <p class="fs-6 mb-0" th:text="|*{getTimeOfUse()}г.|">Продължителност за използване</p>
                            <p class="fs-6 mb-0" th:text="|*{getDistBtwDrips()}cm|">Разстояние между капкуватели</p>
                            <p class="fs-6 mb-0" th:text="|*{getFlowPerDrip()}л/ч|">Дебит на капкувател</p>
                            <p class="fs-6 mb-0" th:text="|*{getMaxPressure()}атм.|">Максимално работно налягане</p>

                        </div>
                        <div class="col ps-0 pe-0 text-center">
                            <div class="row container pt-3 pb-2 mb-2">
                                <div class="col text-end">
                                    <p class="fs-6 mb-0">Единична цена:</p>
                                    <p class="fs-6 mb-0">Цена:</p>
                                </div>
                                <div class="col text-start ">
                                    <p class="fs-6  mb-0" th:value="*{getPrice()}" th:text="|*{getPrice()} лв.|" id="singlePrice">Единична цена</p>
                                    <p class="fs-6  mb-0" id="price" th:text="|*{getPrice()} лв.|"></p>
                                </div>
                            </div>
                            <div class="input-spinner" th:high="50vh">
                                <button id="decrement" onclick="stepper(this)"> - </button>
                                <input type="number" min="1" max="100" step="1" value="1" id="my-input" readonly>
                                <button id="increment" onclick="stepper(this)"> + </button>

                            </div>
                            <div class="button-holder d-flex justify-content-center mt-2" >
                                <button type="submit" class="btn btn-warning mb-1" value="Купи" th:href="@{/}" onclick="validate()">Купи</button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </ul>
</div>
<script  th:inline="javascript">

    const myInput = document.getElementById("my-input");
    const price = document.getElementById('price');
    function stepper(btn) {

        let id = btn.getAttribute("id");
        let step = myInput.getAttribute("step");
        let min = myInput.getAttribute("min");
        let max = myInput.getAttribute("max");
        let val = myInput.getAttribute("value");

        let singlePrice = [[${getDripById1.getPrice()}]];

        let calcStep = (id == "increment") ? (step * 1) : (step * -1);
        let newValue = parseInt(val) + calcStep;

        if (newValue >= min && newValue <= max) {
            myInput.setAttribute("value", newValue);

            let newPrice = newValue * singlePrice;
            price.textContent = newPrice.toFixed(1) + ' лв.';
        }
    }
</script>
<footer th:replace="fragments/fragment::footer"></footer>
</body>
</html>
<!--<script  th:inline="javascript" src="/js/script.js">-->